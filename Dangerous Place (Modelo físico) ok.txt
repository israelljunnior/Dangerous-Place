create database dangerousplace1;
use dangerousplace1;

create table usuario(
	id_usuario int AUTO_INCREMENT PRIMARY KEY,
	nome varchar(50) not null,
	email varchar(130) not null unique,
	senha varchar(130) not null,
	sexo char(1) not null,
	endereco varchar(70) not null,
	nivel_acesso varchar(7) not null

);



create table publicacao(
	id_publicacao int AUTO_INCREMENT PRIMARY KEY,
	titulo varchar(300) not null,
	tema varchar(40) not null,
	conteudo varchar(4000) not null,
	data_hora timestamp not null,
	id_usuario int not null,
	FOREIGN KEY (id_usuario) references usuario (id_usuario)
);

create table comentario(
	id_comentario int AUTO_INCREMENT PRIMARY KEY,
	conteudo varchar(300) not null,
	data_hora timestamp not null,
	id_usuario int not null,
	id_publicacao int not null,
	FOREIGN KEY (id_usuario) references usuario (id_usuario),
	FOREIGN KEY (id_publicacao) references publicacao (id_publicacao)
);

create table dados_regioes(
	id_dados_regioes int AUTO_INCREMENT PRIMARY KEY,
	nome_regiao varchar(25) not null
);

create table dados_municipios(
	id_dados_municipios int AUTO_INCREMENT PRIMARY KEY,
	nome_municipios varchar(25) not null,
	id_dados_regioes int not null,
	FOREIGN KEY (id_dados_regioes) references dados_regioes (id_dados_regioes)
);

create table dados_municipio_cvli(
	id_dados_municipio_cvli int AUTO_INCREMENT PRIMARY KEY,
	total_cvli int not null,
	qtd_mulher int not null,
	qtd_homem int not null,
	qtd_conflito_fam int not null,
	qtd_cinfilto_comu int not null,
	qtd_criminal int not null,
	qtd_homicidio int not null,
	qtd_latrocinio int not null,
	qtd_lesado_morte int not null,
	qtd_armabranca int not null,
	qtd_armafogo int not null,
	idade_ate12 int not null,
	idade_13a17 int not null,
	idade_18a30 int not null,
	idade_31a65 int not null,
	idade_acima65 int not null,
	id_dados_municipios int not null,
	FOREIGN KEY (id_dados_municipios) references dados_municipios (id_dados_municipios)
);

create table dados_municipio_cvp(
	id_dados_municipio_cvp int AUTO_INCREMENT PRIMARY KEY,
	roubo_transeunte int not null,
	roubo_veiculo int not null,
	roubo_estabelecimento int not null,
	roubo_extorsao int not null,
	roubo_inst_financ int not null,
	roubo_carga int not null,
	roubo_motoneta int not null,
	roubo_onibus int not null,
	roubo_residencias int not null,
	id_dados_municipios int not null,
	FOREIGN KEY (id_dados_municipios) references dados_municipios (id_dados_municipios)
);

create table dados_acidentes(
	id_dados_acidentes int AUTO_INCREMENT PRIMARY KEY,
	natureza varchar(15) not null,
	tipo varchar(15) not null,
	endereco varchar(45) not null,
	bairro varchar(30) not null,
	onibus int not null,
	viatura int not null,
	vitima int not null,
	ciclista int not null,
	pedestre int not null,
	auto int not null,
	moto int not null,
	caminhao int not null,
	id_dados_municipios int not null,
	FOREIGN KEY (id_dados_municipios) references dados_municipios (id_dados_municipios)
);